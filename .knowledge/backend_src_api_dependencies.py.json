{"is_source_file": true, "format": "Python", "description": "This file provides a dependency function for FastAPI that retrieves and validates the current user based on a Bearer token, decoding the token and fetching user info from a database.", "external_files": [".auth", ".storage", ".models"], "external_methods": ["decode_token"], "published": ["get_current_user"], "classes": [{"name": "UserPublic", "description": "A data model representing the public view of a user, returned by get_current_user."}, {"name": "PackageTier", "description": "An enumeration or class indicating the user's package subscription tier."}], "methods": [{"name": "UserPublic get_current_user(token: Annotated[str, Depends(oauth2_scheme)])", "description": "Retrieves the current authenticated user based on the OAuth2 Bearer token, decoding it and fetching user info from the database, raising an HTTP 401 error if invalid.", "scope": "", "scopeKind": ""}], "calls": ["decode_token", "db.get_user_by_id"], "search-terms": ["FastAPI dependency", "OAuth2PasswordBearer", "get_current_user", "decode_token", "Bearer token", "user authentication", "dependencies.py"], "state": 2, "file_id": 8, "knowledge_revision": 29, "git_revision": "7c048295b84cf3359757de84ffbea0726b4b6c3a", "ctags": [{"_type": "tag", "name": "get_current_user", "path": "/home/kavia/workspace/code-generation/tailored-api-response-system-96060-96070/backend/src/api/dependencies.py", "pattern": "/^def get_current_user(token: Annotated[str, Depends(oauth2_scheme)]) -> UserPublic:$/", "language": "Python", "typeref": "typename:UserPublic", "kind": "function", "signature": "(token: Annotated[str, Depends(oauth2_scheme)])"}, {"_type": "tag", "name": "oauth2_scheme", "path": "/home/kavia/workspace/code-generation/tailored-api-response-system-96060-96070/backend/src/api/dependencies.py", "pattern": "/^oauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"\\/auth\\/login\")$/", "language": "Python", "kind": "variable"}], "hash": "200e0e4a0fc8e9c3634aa3aef31b9dfd", "format-version": 4, "code-base-name": "backend", "filename": "backend/src/api/dependencies.py", "fields": [{"name": "oauth2_scheme = OAuth2PasswordBearer(tokenUrl=\"\\/auth\\/login\")", "scope": "", "scopeKind": "", "description": "unavailable"}], "revision_history": [{"29": "7c048295b84cf3359757de84ffbea0726b4b6c3a"}]}